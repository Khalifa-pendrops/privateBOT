const mongoose = require("mongoose");

mongoose.connect("mongodb://localhost:27017/telegramBotDB", {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

const userSchema = new mongoose.Schema({
  userDd: Number,
  firstName: String,
  warnings: { type: Number, default: 0 },
  spamActivity: [Number],
});

const User = mongoose.model("User", userSchema);

const rulesSchema = new mongoose.Schema({
  offensiveWords: [String],
  spamLimit: { type: Number, default: 5 },
});

const Rules = mongoose.model("Rules", rulesSchema);

async function initializeRules() {
  const existingRules = await Rules.findOne();
  if (!existingRules) {
    await Rules.create({
      offensiveWords: ["spam", "scam", "fake"],
      spamLimit: 5,
    });
    console.log("Default rules created");
  }
}
initializeRules();
